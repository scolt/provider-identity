(this["webpackJsonpivwa-login-view"]=this["webpackJsonpivwa-login-view"]||[]).push([[0],{111:function(e,t,a){},112:function(e,t,a){},113:function(e,t,a){},214:function(e,t,a){},218:function(e,t,a){},219:function(e,t,a){"use strict";a.r(t);var r,n=a(0),i=a.n(n),c=a(48),s=a.n(c),o=(a(111),a(18)),l=(a(112),a(113),a(1)),d=function(e){var t=e.open,a=e.children,r=e.onClose,i=Object(n.useState)(!1),c=Object(o.a)(i,2),s=c[0],d=c[1],u=Object(n.useCallback)((function(){d(!1),null===r||void 0===r||r()}),[r]);Object(n.useEffect)((function(){return t?document.body.addEventListener("click",u):document.body.removeEventListener("click",u),function(){return document.body.removeEventListener("click",u)}}),[t,u]),Object(n.useEffect)((function(){d(t)}),[t]);return s?Object(l.jsx)("div",{className:"modal",children:Object(l.jsx)("div",{className:"modal-content",onClick:function(e){return e.stopPropagation()},children:a})}):null},u=a(32),j=a(7),b=(a(214),a(8)),m=a(24),O=a(14),h=a(12),f=Object(h.b)("api/validate-user"),p=Object(h.b)("api/validate-user-code"),g=Object(h.b)("api/validate-credentials"),x=Object(h.b)("auth/set-active-tab"),v=Object(h.b)("registration/set-registration-errors"),N=Object(h.b)("registration/clear-registration-errors"),w=Object(h.b)("registration/set-registration-validation"),y=Object(h.c)({activeTab:"sign-in",registrationFormErrors:{},registrationFormValidationInProgress:!1},(r={},Object(m.a)(r,f.type,(function(e){return Object(O.a)(Object(O.a)({},e),{},{registrationFormValidationInProgress:!0})})),Object(m.a)(r,x.type,(function(e,t){return Object(O.a)(Object(O.a)({},e),{},{activeTab:t.payload})})),Object(m.a)(r,v.type,(function(e,t){return Object(O.a)(Object(O.a)({},e),{},{registrationFormErrors:t.payload})})),Object(m.a)(r,N.type,(function(e){return Object(O.a)(Object(O.a)({},e),{},{registrationFormErrors:{}})})),Object(m.a)(r,w.type,(function(e,t){return Object(O.a)(Object(O.a)({},e),{},{registrationFormValidationInProgress:t.payload})})),r)),S=a(49),C=function(e){return e.auth},P=Object(S.a)(C,(function(e){return e.registrationFormErrors})),k=Object(S.a)(C,(function(e){return e.activeTab})),q=j.a().shape({firstName:j.c().min(2,"Too Short!").max(20,"Too Long!").required("Required"),lastName:j.c().min(2,"Too Short!").max(50,"Too Long!").required("Required"),email:j.c().email("Invalid email").required("Required"),password:j.c().min(8,"Password should include at least 8 characters").max(16,"Password should be no more than 16 characters").required("Required"),confirmPassword:j.c().oneOf([j.b("password"),null],"Passwords must match").required()}),E=function(){var e=Object(b.b)(),t=Object(n.useRef)(),a=Object(b.c)(P);t.current&&Object.values(a).length>0&&t.current.setErrors(a);var r=function(e,t,a,r,n,i){return Object(l.jsxs)("div",{className:"form-group ".concat(a&&"error-group"),children:[Object(l.jsxs)("label",{htmlFor:"register_".concat(e),children:[a?Object(l.jsx)("i",{className:"fas fa-exclamation-triangle",children:Object(l.jsx)("span",{className:"error",children:a})}):null,r]}),Object(l.jsx)("input",{id:"register_".concat(e),type:n,name:e,onChange:i})]})};return Object(l.jsxs)("div",{className:"auth-form register",ref:t,children:[Object(l.jsx)("div",{className:"form-header",children:Object(l.jsx)("h1",{children:"Account Registration"})}),Object(l.jsx)(u.a,{innerRef:t,initialValues:{email:"",firstName:"",lastName:"",confirmPassword:"",password:""},validateOnChange:!1,validateOnBlur:!1,validationSchema:q,onSubmit:function(t,a){var r=a.setSubmitting;e(f(t)),r(!1)},children:function(e){var t=e.values,a=e.errors,n=e.handleSubmit,i=e.handleChange;return Object(l.jsxs)("form",{onSubmit:n,children:[Object(l.jsx)("input",{type:"hidden",name:"redirect-url"}),r("firstName",t.firstName,a.firstName,"First Name","text",i),r("lastName",t.lastName,a.lastName,"Last Name","text",i),r("email",t.email,a.email,"Email Address","text",i),r("password",t.password,a.password,"Password","password",i),r("confirmPassword",t.confirmPassword,a.confirmPassword,"Confirm Password","password",i),Object(l.jsx)("div",{className:"form-group",children:Object(l.jsx)("button",{type:"submit",children:"Register"})})]})}})]})},F=j.a().shape({email:j.c().email("Invalid email").required("Required"),password:j.c().min(8,"Password should include at least 8 characters").max(16,"Password should be no more than 16 characters").required("Required")}),R=function(){var e=Object(b.b)(),t=function(e,t,a,r,n){return Object(l.jsxs)("div",{className:"form-group ".concat(t&&"error-group"),children:[Object(l.jsxs)("label",{htmlFor:"register_".concat(e),children:[t?Object(l.jsx)("i",{className:"fas fa-exclamation-triangle",children:Object(l.jsx)("span",{className:"error",children:t})}):null,a]}),Object(l.jsx)("input",{id:"register_".concat(e),type:r,name:e,onChange:n})]})};return Object(l.jsxs)("div",{className:"auth-form sign-in",children:[Object(l.jsx)("div",{className:"form-header",children:Object(l.jsx)("h1",{children:"Account Sign In"})}),Object(l.jsx)(u.a,{initialValues:{email:"",password:""},validateOnChange:!1,validateOnBlur:!1,validationSchema:F,onSubmit:function(t,a){var r=a.setSubmitting;setTimeout((function(){e(g(t)),r(!1)}),400)},children:function(e){var a=e.errors,r=e.handleSubmit,n=e.handleChange;return Object(l.jsxs)("form",{onSubmit:r,children:[Object(l.jsx)("input",{type:"hidden",name:"redirect-url"}),t("email",a.email,"Email Address","text",n),t("password",a.password,"Password","password",n),Object(l.jsx)("div",{className:"form-group",children:Object(l.jsx)("button",{type:"submit",children:"Sign In"})})]})}})]})},I=(a(218),j.a().shape({code:j.c().required("Required")})),T=function(){var e=Object(b.b)(),t=function(e,t,a,r,n){return Object(l.jsxs)("div",{className:"form-group ".concat(t&&"error-group"),children:[Object(l.jsxs)("label",{htmlFor:"code_".concat(e),children:[t?Object(l.jsx)("i",{className:"fas fa-exclamation-triangle",children:Object(l.jsx)("span",{className:"error",children:t})}):null,a]}),Object(l.jsx)("input",{id:"code_".concat(e),type:r,name:e,onChange:n})]})};return Object(l.jsxs)("div",{className:"auth-form full-size",children:[Object(l.jsx)("div",{className:"form-header",children:Object(l.jsx)("h1",{children:"Code confirmation"})}),Object(l.jsx)("p",{className:"auth-info",children:"We send the code to your email. Please enter it in the field below for confirmation."}),Object(l.jsx)(u.a,{initialValues:{code:""},validateOnChange:!1,validateOnBlur:!1,validationSchema:I,onSubmit:function(t,a){var r=a.setSubmitting;e(p(t)),r(!1)},children:function(e){var a=e.errors,r=e.handleSubmit,n=e.handleChange;return Object(l.jsxs)("form",{onSubmit:r,children:[Object(l.jsx)("input",{type:"hidden",name:"redirect-url"}),t("code",a.code,"Code","text",n),Object(l.jsx)("div",{className:"form-group",children:Object(l.jsx)("button",{type:"submit",children:"Confirm"})})]})}})]})},L=function(){var e=Object(b.b)(),t=Object(b.c)(k),a=function(t){return e(x(t))};return Object(l.jsx)("div",{className:"authorization-modal is-".concat(t,"-active"),children:Object(l.jsxs)("div",{className:"authorization-modal-content",children:[Object(l.jsx)(R,{}),Object(l.jsx)("div",{className:"auth-toggle register-toggle",onClick:function(){return a("register")},children:Object(l.jsx)("span",{children:"Register"})}),Object(l.jsx)("div",{className:"auth-toggle sign-in-toggle",onClick:function(){return a("sign-in")},children:Object(l.jsx)("span",{children:"Sign In"})}),Object(l.jsx)(E,{}),Object(l.jsx)(T,{})]})})},V=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],r=t[1],i=Object(b.b)();return Object(l.jsxs)("div",{className:"main",children:[Object(l.jsx)("div",{className:"background"}),Object(l.jsxs)("div",{className:"login-container",children:[Object(l.jsxs)("h1",{children:["Login / Sign Up",Object(l.jsx)("span",{className:"application-name",children:"Interview Platform"})]}),Object(l.jsxs)("section",{className:"social-links",children:[Object(l.jsx)("button",{id:"manual-login",className:"btn-link",title:"Use login/password for authorization",onClick:function(){return r(!0)},children:Object(l.jsx)("i",{className:"fas fa-sign-in-alt"})}),Object(l.jsx)("a",{href:"/ivwa/facebook",title:"Facebook",children:Object(l.jsx)("i",{className:"fab fa-facebook-square"})}),Object(l.jsx)("a",{href:"/ivwa/vk",title:"VK",children:Object(l.jsx)("i",{className:"fab fa-vk"})}),Object(l.jsx)("a",{href:"/ivwa/github",title:"Github",children:Object(l.jsx)("i",{className:"fab fa-github-square"})})]})]}),Object(l.jsx)(d,{open:a,onClose:function(){i(x("sign-in")),r(!1)},children:Object(l.jsx)(L,{})})]})},_=a(11),z=a(13),A=a(224),B=a(223),J=a(225),U=a(105),G=a(104),K=a(222),M=[function(e){return e.pipe(Object(U.a)(f),Object(G.a)((function(e){return J.a.post("/validate",e.payload).pipe(Object(K.a)((function(e){var t=e.response,a=[];return"success"===t.status&&a.push(N(),x("confirmation-code")),"validation-error"===t.status&&a.push(v(t.errors)),a})))})))},function(e){return e.pipe(Object(U.a)(p),Object(G.a)((function(e){return J.a.post("/register",e.payload).pipe(Object(K.a)((function(e){var t=e.response;return"failed"===t.status&&alert(t.error),"success"===t.status&&(window.location=t.url),[]})))})))},function(e){return e.pipe(Object(U.a)(g),Object(G.a)((function(e){return J.a.post("/sign-in",e.payload).pipe(Object(K.a)((function(e){var t=e.response;return"failed"===t.status&&alert(t.error),"success"===t.status&&(window.location=t.url),[]})))})))}],W=Object(z.c)({auth:y}),D=A.a.apply(void 0,Object(_.a)(M)),H=Object(B.a)(),Q=Object(h.a)({reducer:W,middleware:[H]});H.run(D);var X=Q;s.a.render(Object(l.jsx)(i.a.StrictMode,{children:Object(l.jsx)(b.a,{store:X,children:Object(l.jsx)(V,{})})}),document.getElementById("root"))}},[[219,1,2]]]);
//# sourceMappingURL=main.6110d1d2.chunk.js.map